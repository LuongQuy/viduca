<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>slide presentation demo</title>

    <!-- Bootstrap CSS -->
    <link href="./../stylesheets/bootstrap3.3.7.min.css" rel="stylesheet">
    <!-- custom css -->
    <link rel="stylesheet" href="../stylesheets/style.css">
    <link rel="stylesheet" href="../stylesheets/slide.css">
    <link rel="stylesheet" href="../stylesheets/video.css">
</head>

<body>
    <div class="container-fluid">
        <div class="row">
            <nav class="navbar navbar-default nav-classroom" role="navigation">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#">
                        <img src="../images/logo-light.png" alt="">
                    </a>
                </div>
                <div class="collapse navbar-collapse navbar-ex1-collapse" style="margin-left: 90px">
                    <ul class="nav navbar-nav ul-nav-classroom">
                        <li>
                            <a href="#">Files</a>
                        </li>
                        <li>
                            <a href="#">Tools</a>
                        </li>
                        <li>
                            <a href="#">Chat</a>
                        </li>
                        <li>
                            <a href="#">Playlist</a>
                        </li>
                        <li>
                            <a href="#">Participants</a>
                        </li>
                        <li>
                            <a href="#">Notes</a>
                        </li>
                        <li>
                            <a href="#">Invite</a>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
        <div class="row" style="height: 92vh">
            <div class="col-md-9" style="height: 100%">
                <div class="row" style="height:80%">
                    <div id="slideContainer">
                        <div id="slide">
                            <canvas id="the-canvas"></canvas>
                        </div>
                        <div id="controlSlide">
                            <div id="toolbar">
                                <button id="btnPre"><b> << </b></button>
                                <input type="number" id="currentNumber" value="1"> <span class="white">/</span>
                                <span id="maxNumber" class="white"></span>
                                <button id="btnNext"><b> >> </b></button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row" id="videoContainer" style="height: 20%;">
                    <div class="video" id="localVideo"></div>
                    <div class="video" id="remoteVideo"></div>
                </div>
            </div>
            <div class="col-md-3 border-left" style="height: 100%">
                <div class="row">
                    <div id="chat-panel" class="panel panel-default" style="border-radius: 0px;">
                        <div class="panel-heading">
                            <i class="fa fa-comments fa-fw"></i> Chat
                        </div>
                        <!-- /.panel-heading -->
                        <div class="panel-body" style="height: 199px">
                            <ul class="chat" id="chat-content">
                            </ul>
                        </div>
                        <!-- /.panel-body -->
                        <div class="panel-footer">
                            <div class="input-group">
                                <input id="txtMessage" type="text" class="form-control input-sm" placeholder="Type your message here..." />
                                <span class="input-group-btn">
                                    <button class="btn btn-sm btn-info" id="btn-chat">
                                        Send
                                    </button>
                                </span>
                            </div>
                        </div>
                        <!-- /.panel-footer -->
                    </div>
                    <!-- /.panel .chat-panel -->
                </div>
            </div>
        </div>
    </div>
    <h1><%= token %></h1>
    <script src="../javascripts/pdf.js"></script>
    <script src="../javascripts/slide.js"></script>
    <!-- <script src="../javascripts/socket.io.js"></script> -->
    <script src="../javascripts/openvidu-browser-2.6.0.js"></script>
    <script>
        var token = <%- JSON.stringify(token) %>;
        // const socket = io ('http://localhost:3000');
        const OV = new OpenVidu();
        session = OV.initSession();
        session.on('streamCreated', (event) => {
            session.subscribe(event.stream, "remoteVideo");
        });

        session.connect(token)
        .then(() => {
            var publisher = OV.initPublisher('localVideo');
            session.publish(publisher);
        })
        .catch(err => console.log(err));
    </script>
</body>

</html>